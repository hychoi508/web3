

학습 내용 : client 접속 상태 유지를 위한 개발 기술

1. 필요성 
	- http는 개발자 코드로 상태유지 설계.
	- 코드로 로그인 ~ 로그아웃까지의 client 접속상태유지 개발. 
	- 
2. 상태유지 개발 기술. 
	1) client 시스템 메모리 사용.
		(1) 브라우저 자체 메모리 저장.
		(2) pc의 txt 파일로 저장. 
		(3) 쿠키 기술 
		(4) 문자열 저장 타입. 
		(5) 주요 API 
				가. 쿠키 생성 및 client에 저장.
					1단계. 쿠키 생성.
						Cookie 변수명 = new Cookie("key", "value")
						
					2단계. 쿠키 life time 설정 (생명시간)
						- 단, client가 삭제하면 설정데이터 삭제.
						- 변수.setMaxAge(원하는 초) -----------------------초 단위로 입력 가능. 
							: setMaxAge 코드 생략시 현 실행되는 브라우저가 종료시 쿠기정보 삭제됨. -------- 휘발성 
						
					3단계. client 시스템에 전송해서 저장. 
						- response.addCookie(쿠키객체); ------------------- 쿠기 값을 넣겠다는 뜻임.
						
				나. client로부터 쿠키 획득 및 활용.		
					1단계. client로부터 쿠키 정보 획득
						- Cookie[] getCookies() ------------------------------어떻게 획득 되는지 모르겠음. 봐야함. 
						- 해당 도메인(사이트)에서 발생된 쿠기 정보들만 반환. 
					2단계. 고유한 key로 쿠키 정보 구분해서 활용.
						- String getName() : 해당 쿠키 key 반환. -----------------getName은 쿠키 key값 반환하는 고유 메소드.
						- String getValue() : 해당 쿠키 value 반환.  -----------------getValue은 쿠키 value값 반환하는 고유 메소드.
					3단계. client 시스템에 있는 쿠키 정보 삭제.  
		
	2) server 시스템 메모리 사용.[세션]													
		(1) Object 타입으로 데이터 저장.
		(2) 세션 기술
				- 서버 종료시 세션 데이터 다 삭제. -------------------- 휘발성 
		(3) 주요 API 
			HttpSession
			getSession() -------------------------------------- session 생성하는 메소드임. 자바에서 new 생성자와 같은 의미. 
				- 생성 또는 반환
				- ()와 (true) : 없으면 생성, 이미 HttpSession존재하면 반환 
				- (false) : 이미 존재하면 반환하고, 없어도 새로 생성하지 않습니다. 
			setAttrubute(String key, Object value) : 세션에 데이터 저장 ----------------------------------- set은 key 값과 value 값 저장. 
			getAttribute(string key) : 세션에 저장된 데이터 반환  ----------------------------------------------- get은 저장된 key 값 반환한다는 의미.
			invalidate() : 더 이상 사용이 불필요한 세셩 객체 무효화. ------------------------------------------- (이거 안하면 접속이 유지 되어 있어서, 서버의 속도가 느려 진다.)
 		(4) 로그인 상태에서 브라우저에 어떠한 action도 하지 않을경우 세션 유효 시간 설정. 
 			-브라우저가 방치된 상태
 			- web.xml(해당 project만의 고유한 설정 파일)
 			 <session-config> ---------------------------------------------------------------------------------------------------
  				 <session-timeout>10</session-timeout>-------------------------------------------------------------------- 이거는 세션이 10분간 유지되고, 10분 후 자동으로 휘발된다는 의미를 가짐. 
  			</session-config>---------------------------------------------------------------------------------------------------

	
		세션 (금융사이트에서 한동안 접속 없으면 접속이 꺼지는 것)
		 vs 
		쿠키(여러분 모니터링 하는 것과 같다. 해킹이 아니라, 여러분 데이터를 쓸 수 있게끔 하는 것이다. 페북 들어가봐도 내가 본 것 나오는데, 그게 정보가 유출 되는 것임.)